{% extends 'shop/base.html'%}
{%block content%}
{% load humanize%}
<br><br><br><br> <br><br>
<div class="container">
  <div class="card mb-3">
    <div class="row g-0">
      <div class="col-md-4">
        <img src="{{product.picture.url}}" class="img-fluid rounded-start" alt="...">
      </div>
      <div class="col-md-8">
      <div class="card-body">
        <h5 class="card-title">{{ product.name}} </h5>
        <p class="card-text"> Ø¯Ø± Ø¯Ø³ØªÙ‡ {{product.category}} </p>
        {% if product.is_sale%}
            <p class="card-text"> ğŸ’°  Ù‚ÛŒÙ…Øª Ù‚Ø¨Ù„ Ø§Ø² ØªØ®ÙÛŒÙ : <strike>{{product.price|intcomma}} ØªÙˆÙ…Ø§Ù†</strike> </p>
            <p class="card-text"> ğŸ’° Ù‚ÛŒÙ…Øª ÙØ¹Ù„ÛŒ :   {{product.sale_price|intcomma}} ØªÙˆÙ…Ø§Ù†</p>
        {%else%}
            <p class="card-text">ğŸ’° Ù‚ÛŒÙ…Øª :   {{product.price|intcomma}} ØªÙˆÙ…Ø§Ù† </p>
        {%endif%}
        ØªØ¹Ø¯Ø§Ø¯:
        <select class="form-select"  id='cart-qty'>
          <option value="1">Û±</option>
          <option value="2">Û²</option>
          <option value="3">Û³</option>
          <option value="3">Û´</option>
          <option value="3">Ûµ</option>
          <option value="3">Û¶</option>
         </select>
         <br> <br>
         <button class='btn btn-primary' type='button'value='{{product.id}}' id='add-cart' >   Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ â•</button>
         <br><br>
        <div><a class="btn btn-outline-dark mt-auto" href="{% url 'home'%}"> Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ ğŸ”»</a></div>
      </div>
      </div>
    </div>
  </div>
</div>   
<br><br> <br><br> <br><br>
<script>
$(document).on('click','#add-cart',function(e){
  e.preventDefault();
  $.ajax({
    type:'POST',
    url:'{% url 'cart_add'%}',
    data:{
      product_id :$('#add-cart').val(),
      product_qty:$('#cart-qty option:selected').text(),
      csrfmiddlewaretoken:'{{csrf_token}}',
      action:'post'
    },
    success:function(jason){
      document.getElementById('cart_quantity').textContent=jason.qty
      location.reload();
    },
    error:function(xhr,errmsg,err){
    }
  })
})
</script>
{%endblock%}

